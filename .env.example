# ComfyUI Serverless API Environment Configuration

# API Configuration
API_TITLE=ComfyUI Serverless API
API_VERSION=1.0.0
API_DESCRIPTION=Serverless ComfyUI API for AI image generation
DEBUG=false
HOST=0.0.0.0
PORT=8000

# Security
SECRET_KEY=your-secret-key-change-in-production-use-strong-random-key
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
ALGORITHM=HS256

# Database Configuration
DATABASE_URL=postgresql://comfyui_user:secure_password@localhost:5432/comfyui_serverless
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20

# Redis Configuration
REDIS_URL=redis://localhost:6379/0
REDIS_QUEUE_DB=1
REDIS_CACHE_DB=2

# Celery Configuration
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/1

# Storage Configuration
STORAGE_TYPE=s3  # s3, local, gcs
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key
AWS_S3_BUCKET=your-comfyui-bucket
AWS_S3_REGION=us-east-1
STORAGE_BASE_PATH=/tmp/comfyui
MAX_FILE_SIZE=104857600  # 100MB in bytes

# ComfyUI Configuration
COMFYUI_PATH=/opt/ComfyUI
COMFYUI_MODELS_PATH=/opt/ComfyUI/models
COMFYUI_OUTPUT_PATH=/opt/ComfyUI/output
COMFYUI_TEMP_PATH=/opt/ComfyUI/temp
COMFYUI_API_URL=http://localhost:8188

# GPU Configuration
GPU_MEMORY_FRACTION=0.8
MAX_GPU_MEMORY_GB=24
ENABLE_MODEL_OFFLOAD=true
MODEL_CACHE_SIZE_GB=10

# Rate Limiting
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000
RATE_LIMIT_PER_DAY=10000

# Monitoring & Metrics
ENABLE_METRICS=true
METRICS_PORT=9090
LOG_LEVEL=INFO
LOG_FORMAT=json

# Workflow Execution
MAX_EXECUTION_TIME_MINUTES=30
MAX_QUEUE_SIZE=100
WORKER_CONCURRENCY=2

# File Cleanup
CLEANUP_INTERVAL_HOURS=1
TEMP_FILE_RETENTION_HOURS=24
RESULT_RETENTION_DAYS=7

# Webhooks
WEBHOOK_TIMEOUT_SECONDS=30
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_RETRY_DELAY_SECONDS=5

# Health Checks
HEALTH_CHECK_INTERVAL_SECONDS=30
HEALTH_CHECK_TIMEOUT_SECONDS=10